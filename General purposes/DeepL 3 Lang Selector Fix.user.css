/* ==UserStyle==
@name           ✔ DeepL 3 Lang Selector Fix
@version        2025.11.09
@preprocessor   less
@license        CC-BY-NC-SA-4.0
@author         Rainbow-Spike
@namespace		Rainbow-Spike
@supportURL     https://github.com/Comicslate/Userstyles/raw/main/General%20purposes/DeepL%203%20Lang%20Selector%20Fix.user.css
==/UserStyle== */
@-moz-document domain("deepl.com")
{
    /* языков стало слишком много для перечисления на вылет */
    /* проще погасить всё */
    [data-testid*="lang-option"], [data-testid*="es-419"] /* латиноиспанский гасим особо */
    {
        display: none !important;
    }
    /* а потом включить и украсить нужное */
    .ins ( @lng, @pic, @cnt, @ord )
    {
        &[data-testid*="lang-option-@{lng}"]
        {
            display: block !important;
            order: @ord;
            div.w-full::before
            {
                background: ~ 'url(https://github.com/DavideViolante/Wikipedia-Flag-Icons/raw/master/Chrome%20Extension/WikipediaFlagIcons/images/flags/@{pic}.png)';
                content: '@{cnt}';
            }
        }
    }
    .ins ( en-US, us, en, 1 );
    .ins ( ru, ru, ru, 2 );
    .ins ( de, de, de, 3 );
    .ins ( fr, fr, fr, 4 );
    .ins ( bg, bg, bg, 5 );
    .ins ( pt-BR, br, br, 6 );
    .ins ( cs, cz, cs, 7 );
    .ins ( da, dk, da, 8 );
    .ins ( el, gr, el, 9 );
    .ins ( es, es, es, 10 );
    .ins ( fi, fi, fi, 11 );
    .ins ( he, il, he, 12 );
    .ins ( hu, hu, hu, 13 );
    .ins ( id, id, id, 14 );
    .ins ( it, it, it, 15 );
    .ins ( ja, jp, ja, 16 );
    .ins ( ko, kr, ko, 17 );
    .ins ( pl, pl, pl, 18 );
    .ins ( pt-PT, pt, pt, 19 );
    .ins ( tr, tr, tr, 20 );
    .ins ( uk, ua, uk, 21 );
    .ins ( zh-Hans, cn, zh, 22 );

    [data-layout-id*="LanguagePopover"]
    {
        padding: 0;
        /* удаление поиска языка, пояснений, предложки языков и трёхколоночной сетки */
        .py-3, h3, div :nth-child(2) .relative, .relative > :nth-child(1)
        {
            display: none !important;
        }
        /* общая стилизация панели кнопок */
        [role="listbox"]
        {
            column-gap: 0;
            grid-template-columns: auto;
            grid-template-rows: auto !important;
            button
            {
                border: 1px solid #ddd;
                border-radius: 10px 20px;
                /* выбранный язык */
                &[aria-selected="true"]
                {
                    background-color: #fec;
                    font-weight: 1000;
                }
                /* флаги */
                div.w-full::before
                {
                    background-repeat: no-repeat !important;
                    background-position: 50% 5% !important;
                    font-size: 14px;
                    padding-top: 9px;
                    width: 100%;
                }
                span
                {
                    display: none;
                }
            }
        }
    }
}
