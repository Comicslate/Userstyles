/* ==UserStyle==
@name           DeepL 3 Lang Selector Fix
@namespace      Comicslate
@version        2023.8.7
@preprocessor   less
@license        CC-BY-NC-SA-4.0
@author         Rainbow-Spike
@supportURL     https://github.com/Comicslate/Userstyles/raw/main/General%20purposes/DeepL%203%20Lang%20Selector%20Fix.user.css
==/UserStyle== */

@-moz-document domain("deepl.com") {
	@lang: 21;
	.ins ( @lng, @pic, @cnt, @ord ) {
		&[data-testid*='-@{lng}'] {
			order: @ord;
			&::before {
				background: ~ 'url(https://github.com/DavideViolante/Wikipedia-Flag-Icons/raw/master/Chrome%20Extension/WikipediaFlagIcons/images/flags/@{pic}.png)';
				content: '@{cnt}';
			}
		}
	}
	.lmt--web .lmt__sides_container {
		.lmt__language_select__menu_three_columns_close_button { /* кнопка Закрыть */
			display: none;
		}

		.lmt__language_select__menu {
			transform: translateY(-30px);

			div:nth-of-type(1) { /* найти язык */
				display: none !important;
			}

			.lmt__language_wrapper { /* блок кнопок */
				margin: 0;
			}

			&[data-testid*="source"] button { width: calc(100% / (@lang - 1)); }
			&[data-testid*="target"] button { width: calc(100% / @lang); }
			button { /* кнопки */
				border: 1px solid #ddd;
				border-radius: 5px;
				display: flex;
				line-height: normal;
				min-width: calc(100% / @lang);
				padding: 0;

				&[data-testid]::before { /* флаг */
					background-repeat: no-repeat !important;
					background-position: 50% 5% !important;
					color: black;
					font-size: 15px;
					padding-top: 9px;
					text-align: center;
					width: 100%;
				}
				.ins ( en, us, en, 1 );
				.ins ( ru, ru, ru, 2 );
				.ins ( de, de, de, 3 );
				.ins ( fr, fr, fr, 4 );
				.ins ( bg, bg, bg, 5 );
				.ins ( cs, cz, cs, 7 );
				.ins ( da, dk, da, 8 );
				.ins ( el, gr, el, 9 );
				.ins ( es, es, es, 10 );
				.ins ( fi, fi, fi, 11 );
				.ins ( hu, hu, hu, 12 );
				.ins ( id, id, id, 13 );
				.ins ( it, it, it, 14 );
				.ins ( ja, jp, ja, 15 );
				.ins ( ko, kr, ko, 16 );
				.ins ( pl, pl, pl, 17 );
				.ins ( pt, pt, pt, 18 );
				.ins ( tr, tr, tr, 19 );
				.ins ( uk, ua, uk, 20 );
				.ins ( zh, cn, zh, 21 );
				.ins ( BR, br, br, 6 );

				span, /* имена языков */
				&[data-testid*="-auto"],
				&[data-testid*="en-GB"],
				&[data-testid*="-lv"],
				&[data-testid*="-lt"],
				&[data-testid*="-nb"],
				&[data-testid*="-nl"],
				&[data-testid*="-ro"],
				&[data-testid*="-sk"],
				&[data-testid*="-sl"],
				&[data-testid*="-sv"],
				&[data-testid*="-et"] {
					display: none !important;
				}
			}
		}
	}
}
